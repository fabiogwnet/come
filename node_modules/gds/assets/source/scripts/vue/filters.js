Vue.filter('thousands', function (value) {
  return value ? d3.format(",")(value) : 0;
})

Vue.filter('money', function (value) {
  if( !value ) {
    value = 0;
  }

  return d3.format('$,.2f')(value);
})

Vue.filter('number', function (value) {
  if( !value ) {
    value = 0;
  }

  return d3.format(',')(value);
})

Vue.filter('percentage', function (value) {
  if( !value ) {
    value = 0;
  }

  return d3.format(",.2%")(value);
})

Vue.filter('percentage_integer', function (value) {
  if( !value ) {
    value = 0;
  }

  return d3.format(".0%")(value);
})

Vue.filter('striphtml', function (value) {
  if(value) {
    var div = document.createElement("div");
    div.innerHTML = value;
    var text = div.textContent || div.innerText || "";
    return text;
  }

  return value;
})


Vue.filter('capitalize', function (value) {
  return value ? value.toLowerCase().replace(/(?:^|\s)\S/g, function(a) { return a.toUpperCase(); }) : '';
})

Vue.filter('querystring', function (value, prefix) {
  serialize = function(obj, prefix) {
    var str = [],
      p;
    for (p in obj) {
      if (obj.hasOwnProperty(p)) {
        var k = prefix ? prefix + "[" + p + "]" : p,
          v = obj[p];
        str.push((v !== null && typeof v === "object") ?
          serialize(v, k) :
          encodeURIComponent(k) + "=" + encodeURIComponent(v));
      }
    }
    return str.join("&");
  }
  
  return serialize(value, prefix);
})

Vue.filter('truncate', function (text, length) {
	return text && text.length > length ? text.substring(0, length) + '...' : text;
});

Vue.filter('date', function (value, format = 'DD/MM/YYYY') {
	return value ? moment(value).format(format) : false;
});

Vue.filter('datetime', function (value, format = 'DD/MM/YYYY HH:mm') {
	return value ? moment(value).format(format) : false;
});